import{a as R}from"./chunk-YYEMO5YU.js";import{a as U}from"./chunk-YQAUE4SL.js";import{a as q}from"./chunk-ZA4OKVUP.js";import{a as z}from"./chunk-HJ3OLQ3W.js";import"./chunk-AEGSUJYN.js";import{b as M,c as N,g as F}from"./chunk-CB24OI67.js";import{a as V,c as j}from"./chunk-XHM266AO.js";import{$a as k,Aa as S,Db as I,Eb as D,Oa as p,Pa as d,Qa as L,Sa as T,T as u,Ta as w,Ua as f,Va as o,Wa as m,Xa as g,Y as E,Z as y,db as B,ea as b,fb as v,nb as c,ob as P,qa as h,qb as A,sa as l,vb as _,wb as C}from"./chunk-EEDBMP4G.js";function $(i,r){if(i&1&&(o(0,"div",6),c(1),_(2,"titlecase"),_(3,"cleanCategoryText"),m()),i&2){let t=v();l(),P(C(3,3,C(2,1,t.params().get("categoria")??"")))}}function G(i,r){if(i&1&&(o(0,"div",10),c(1),m()),i&2){let t,e=v(2);l(),A("",e.params().get("type")," : ",(t=e.params())==null?null:t.get(e.params().get("type")??"")," ")}}function H(i,r){if(i&1&&p(0,G,2,2,"div",10),i&2){let t,e=v();d((t=e.params())!=null&&t.has(e.params().get("type")??"")?0:-1)}}function J(i,r){if(i&1&&g(0,"card",8),i&2){let t=r.$implicit;f("event",t)}}function K(i,r){if(i&1){let t=k();o(0,"div",9)(1,"div"),c(2,"No s'han trobat events ni activitats amb la vostra sel.leci\xF3"),m(),o(3,"a",11),B("click",function(){E(t);let n=v();return y(n.backPage())}),c(4,"Tornar"),m()()}}var x=class i{aroute=u(F);aculturalService=u(j);events=b(null);params=U(this.aroute.queryParamMap,{initialValue:void 0});location=u(M);urlImage=I(()=>this.aculturalService.logo());queryParams=D(()=>{let r=this.params()?.get("categoria")?.trim()??"",t=this.params()?.get("type")?.trim()??"",e=this.params()?.get(t)?.trim()??"",n=this.aculturalService.getEventsByCategory(r),a=this.filterByType(n,t,e),s=V.dataForEventList(a);this.events.set(s)});filterByType(r,t,e){let n=new Set;return r.forEach(a=>n.add(a)),t=="provincia"?Array.from(n).filter(a=>(a.comarca?.split("/")??"")[0]==e.trim()):t=="comarca"?Array.from(n).filter(a=>(a.comarca?.split("/")??"")[1]==e.trim()):t=="municipio"?Array.from(n).filter(a=>a.comarca_i_municipi?.trim()==e):Array.from(n)}backPage(){this.location.back()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-event-list"]],decls:15,vars:4,consts:[[1,"min-h-full","pb-16","w-full"],[1,"text-2xl","bg-teal-700","text-teal-50","flex","justify-between"],[1,"flex","justify-start"],[1,"w-15","relative","bottom-1.5",3,"src"],[1,"text-2xl","pt-4"],[1,"mt-4","w-65","text-center","flex","flex-col"],[1,"text-xl"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-5","pt-5","p-3","px-4"],[3,"event"],[1,"flex","flex-col","p-5","gap-5"],[1,"text-md"],[1,"btn","bg-teal-500","text-white","hover:bg-teal-800","w-50",3,"click"]],template:function(t,e){if(t&1&&(o(0,"div",0)(1,"section")(2,"div",1)(3,"div",2),g(4,"app-back-button")(5,"img",3),o(6,"div",4),c(7,"Events"),m()(),o(8,"div",5),p(9,$,4,5,"div",6),p(10,H,1,1),m()(),o(11,"div",7),T(12,J,1,1,"card",8,L),p(14,K,5,0,"div",9),m()()()),t&2){let n,a,s;l(5),f("src",e.urlImage(),h),l(4),d((n=e.params())!=null&&n.has("categoria")?9:-1),l(),d((a=e.params())!=null&&a.has("type")?10:-1),l(2),w(e.events()),l(2),d(((s=e.events())==null?null:s.length)==0?14:-1)}},dependencies:[R,z,q,N],encapsulation:2})};export{x as default};
