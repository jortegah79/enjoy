<div class="min-h-full pb-16 w-full">

    @if(event()){
    <div class="flex justify-between text-xl   bg-teal-700 text-teal-50 p-2">
        <div class="flex ">
            <app-back-button />
            <span class="pt-3">{{event()?.denominaci}}</span>
        </div>
        <div class="p-3 cursor-pointer text-rose-400 hover:text-pink-600">
            <i (click)="setFavorite()"
                class="bi {{ favoritesService.isFavorite(event()!.codi)? 'bi-heart-fill':'bi-heart' }}"></i>
        </div>
    </div>

    <section class=" grid grid-cols-1  gap-4 p-4 ">

        <swiper-images [images]="eventImatges()" />
        <div>

            @if (event()?.modalitat ) {
            <div class="flex flex-nowrap gap-3 mb-2">
                <span class="font-bold  text-teal-800 dark:text-teal-300">Modalitat:</span>
                @if(event()!.modalitat === 'Virtual'){
                <span class="text-amber-50 bg-amber-700 px-4 flex align-middle rounded-3xl pt-1">{{
                    event()?.modalitat
                    }}</span>
                }
                @else{
                <span class="text-indigo-50 bg-indigo-700 px-4 flex align-middle rounded-3xl pt-1">{{
                    event()?.modalitat
                    }}</span>
                }
            </div>
            }
            @if (event()?.tags_altres_categor_es) {
            <div class="flex flex-nowrap gap-3 mb-2">
                @for (item of event()?.tags_altres_categor_es!.split(","); track $index) {
                <div class="badge badge-warning">

                    {{ item | cleanCategoryText | titlecase}}
                </div>
                }
            </div>
            }
            @if (event()?.categorias) {
            <div class="flex flex-nowrap gap-3 mb-2">
                @for (item of event()?.categorias; track $index) {
                <div class="badge badge-neutral py-2">
                    <a class="cursor-pointer pt-1" (click)="goToList(item)">{{ item | cleanCategoryText | titlecase  }}</a>
                </div>
                }
            </div>
            }
            @if (event()?.tags_mbits) {
            <div class="flex flex-no-wrap gap-3 mb-2">
                @for (item of event()?.tags_mbits?.split(","); track $index) {
                <div class="badge badge-accent pt-1">
                    {{ item | cleanCategoryText | titlecase}}
                </div>
                }
            </div>
            }

        </div>
        @if ( event()!.latitud && event()!.longitud ) {

        <div
            class="hidden   overflow-hidden md:flex justify-center align-middle   mt-3 border-2 border-dark  rounded-3xl h-[250px] lg:h-[350px] relative">
            <event-map lat="{{event()!.latitud}}" lng="{{ event()!.longitud }}" />
            <button-to-google-maps lat="{{event()!.latitud}}" lon="{{event()!.longitud}}" />
        </div>

        }

    </section>

    <section class="  mt-2 px-2">
        @if ( event()?.adre_a || event()?.comarca || event()?.comarca_i_municipi || event()?.tel_fon ||
        event()?.data_inici || event()?.horari || event()?.url) {
        <div class=" border-b border-teal-700 dark:border-teal-300 text-teal-700 dark:text-teal-300 text-xl mb-2">
            Localització
        </div>
        @if (event()?.url) {
        <div class="flex"> <span class="text-stone-700 dark:text-stone-300 font-bold me-2">Web:</span>
            <a [href]="event()?.url" class="text-decoration-none text-teal-700 dark:text-teal-300 flex" target="_blank">{{
                event()?.url }}</a>
        </div>
        }
        @if (event()?.adre_a) {
        <div class="text-teal-700 dark:text-teal-300"> <span class="text-stone-700 dark:text-stone-300 font-bold me-2">Adreça:</span>{{ event()?.adre_a }}
        </div>
        }
        @if (event()?.comarca) {
        <div class="text-teal-700 dark:text-teal-300"> <span class="text-stone-700 dark:text-stone-300 font-bold me-2">Comarca:</span>{{
            event()?.comarca!.split('/')[1] }} </div>
        }
        @if (event()?.comarca_i_municipi) {
        <div class="text-teal-700 dark:text-teal-300"> <span class="text-stone-700 dark:text-stone-300 font-bold me-2">Municipi:</span>{{
            event()!.comarca_i_municipi!.split("/")[event()!.comarca_i_municipi!.split("/").length - 1] | titlecase
            |
            cleanCategoryText }} </div>
        }
        @if (event()?.tel_fon) {
        <div class="text-teal-700 dark:text-teal-300"> <span class="text-stone-700 dark:text-stone-300 font-bold me-2">Teléfon:</span>{{ event()?.tel_fon
            }}
        </div>
        }
        @if (event()?.data_inici) {
        <div class="text-teal-700 dark:text-teal-300"> <span class="text-stone-700 dark:text-stone-300 font-bold me-2">Data inici:</span>{{
            event()?.data_inici
            | date:'dd / MM / yyyy'
            }} </div>
        }
        @if (event()?.horari) {
        <div class="text-teal-700 dark:text-teal-300"> <span class="text-stone-700 dark:text-stone-300 font-bold me-2">Horari:</span>{{ event()?.horari }}
        </div>
        }
        @if (event()?.entrades) {
        <div class="text-teal-700 dark:text-teal-300"> <span class="text-stone-700 dark:text-stone-300 font-bold me-2">Entrades:</span>{{ event()?.entrades
            }}
        </div>
        }
        @if (event()?.nombotoentrades) {
        <div class="text-teal-700 dark:text-teal-300"> <span class="text-stone-700 dark:text-stone-300 font-bold me-2">Entrades:</span>{{
            event()?.nombotoentrades }}
        </div>
        }
        }
        @if ( event()?.latitud && event()?.longitud ) {
        <div class="block md:hidden border-2 border-dark rounded-3xl my-2 relative">
            <div class=" overflow-hidden flex justify-center align-middle h-[250px] rounded-3xl ">
                <event-map lat="{{event()?.latitud}}" lng="{{ event()?.longitud }}" />
                <button-to-google-maps lat="{{event()!.latitud}}" lon="{{event()!.longitud}}" />
            </div>
        </div>
        }

        <div class=" border-b border-teal-700 dark:border-teal-300 text-teal-700 dark:text-teal-300 text-xl mt-4">
            Informació
        </div>
        <div class="mt-2  text-stone-700 dark:text-stone-200 peer-checked:bg-teal-800 peer-checked:pt-2 peer-checked:text-teal-50">
            {{ event()?.descripcio}}

        </div>
        <div class=" border-b border-teal-700 dark:border-teal-300 text-teal-700 dark:text-teal-300 text-xl mt-2">
            Enllaços d'interés
        </div>
        <div class="mt-2  text-stone-700 dark:text-stone-200 peer-checked:bg-teal-800 peer-checked:pt-2 peer-checked:text-teal-50">
            <!-- @for (event()?.enllac1_url of this.event()?.enlla_os?.split(","); track $index;let index= $index) { -->
            @if (event()?.enllac1_nom) {
            <a [href]="event()?.enllac1_url" class="text-decoration-none text-emerald-700 dark:text-emerald-300 flex flex-nowrap"
                target="_blank">{{
                event()?.enllac1_nom }}</a>
            }
            @if (event()?.enllac2_nom) {
            <a [href]="event()?.enllac2_url" class="text-decoration-none text-emerald-700 dark:text-emerald-300 flex flex-nowrap"
                target="_blank">{{
                event()?.enllac2_nom }}</a>
            }
            @if (event()?.enllac3_nom) {
            <a [href]="event()?.enllac3_url" class="text-decoration-none text-emerald-700 dark:text-emerald-300 flex flex-nowrap"
                target="_blank">{{
                event()?.enllac3_nom }}</a>
            }




            <!-- } -->
        </div>
        <!-- TODO añadir los tags -->
    </section>
    <!-- TODO aÑadir mapa  con boton para ir a google maps-->
    }
    @else {
    <span class="loading loading-ring loading-xl">Cargando...</span>
    }

</div>